# Leaf Disease AI - æœ¬åœ°ç«¯é–‹ç™¼ç’°å¢ƒ

è‘‰ç‰‡ç—…å®³æª¢æ¸¬ AI ç³»çµ±ï¼ˆæœ¬åœ°ç«¯å°ˆç”¨ç‰ˆæœ¬ï¼‰

## åŠŸèƒ½ç‰¹è‰²

-   ğŸ¤– AI ç—…å®³æª¢æ¸¬ï¼šä½¿ç”¨ YOLOv11 æ¨¡å‹é€²è¡Œè‘‰ç‰‡ç—…å®³æª¢æ¸¬
-   ğŸ“Š çµ±è¨ˆåˆ†æï¼šä½¿ç”¨è€…æª¢æ¸¬æ­·å²èˆ‡çµ±è¨ˆè³‡æ–™
-   ğŸ” ä½¿ç”¨è€…èªè­‰ï¼šè¨»å†Šã€ç™»å…¥ã€å€‹äººè³‡æ–™ç®¡ç†
-   âš¡ Redis å¿«å–ï¼šæå‡ API éŸ¿æ‡‰é€Ÿåº¦
-   ğŸ“š Swagger API æ–‡æª”ï¼šå®Œæ•´çš„ API æ–‡æª”èˆ‡æ¸¬è©¦ä»‹é¢
-   â˜ï¸ Cloudinary åœ–ç‰‡å„²å­˜ï¼šå¯é¸çš„é›²ç«¯åœ–ç‰‡å„²å­˜æœå‹™ï¼ˆæ”¯æ´è‡ªå‹•å„ªåŒ–ï¼‰
-   ğŸ¨ ç¾ä»£åŒ– UIï¼šä½¿ç”¨ Tailwind CSS 3.x æ§‹å»ºçš„éŸ¿æ‡‰å¼å‰ç«¯ä»‹é¢
-   ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆï¼šæ”¯æ´æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢ä¸‰ç¨®è£ç½®ä½ˆå±€
-   ğŸ›£ï¸ è·¯ç”±ç®¡ç†ï¼šä½¿ç”¨ React Router å¯¦ç¾ URL è·¯ç”±å’Œç€è¦½å™¨å°èˆª

## ç³»çµ±éœ€æ±‚

-   Python 3.8+
-   PostgreSQL 12+
-   Redis 6.0+ï¼ˆå¯é¸ï¼Œæœªå®‰è£æ™‚æœƒè‡ªå‹•é™ç´šï¼‰
-   Node.js 16+ï¼ˆå‰ç«¯é–‹ç™¼ï¼‰
-   npm æˆ– yarnï¼ˆå‰ç«¯å¥—ä»¶ç®¡ç†ï¼‰

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

**å¾Œç«¯ä¾è³´ï¼š**

```bash
pip install -r requirements.txt
```

**å‰ç«¯ä¾è³´ï¼š**

```bash
cd frontend
npm install
```

å‰ç«¯ä½¿ç”¨ **Tailwind CSS 3.x** å’Œ **React Router** ä½œç‚ºæ ¸å¿ƒæ¡†æ¶ï¼Œæ‰€æœ‰ä¾è³´å·²åŒ…å«åœ¨ `package.json` ä¸­ï¼š

-   React 18.3.1
-   React Router DOM 7.10.1ï¼ˆè·¯ç”±ç®¡ç†ï¼‰
-   Tailwind CSS 3.4.19
-   PostCSS 8.5.6
-   Autoprefixer 10.4.22
-   Vite 5.4.21ï¼ˆå»ºç½®å·¥å…·ï¼‰
-   @vitejs/plugin-react 4.3.1

**æ³¨æ„**ï¼š`package.json` ä¸­åŒ…å« `"type": "module"`ï¼Œç¢ºä¿ PostCSS é…ç½®ä½¿ç”¨ ES æ¨¡çµ„èªæ³•ã€‚

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

å‰µå»º `.env` æª”æ¡ˆï¼ˆåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼‰ï¼š

```bash
# è³‡æ–™åº«è¨­å®š
DB_HOST=localhost
DB_PORT=5432
DB_NAME=leaf_disease_ai
DB_USER=postgres
DB_PASSWORD=your_password

# Redis è¨­å®šï¼ˆå¯é¸ï¼‰
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Cloudinary åœ–ç‰‡å„²å­˜è¨­å®šï¼ˆå¼·çƒˆå»ºè­°å•Ÿç”¨ï¼‰
# åœ–ç‰‡ç¾åœ¨å®Œå…¨å„²å­˜åœ¨ Cloudinaryï¼Œä¸å†å„²å­˜åœ¨è³‡æ–™åº« BLOB
USE_CLOUDINARY=true
CLOUDINARY_CLOUD_NAME=dcqts6ryi
CLOUDINARY_API_KEY=398648383382972
CLOUDINARY_API_SECRET=your_api_secret_here  # è«‹æ›¿æ›ç‚ºæ‚¨çš„ API Secret
CLOUDINARY_SECURE=true
CLOUDINARY_FOLDER=leaf_disease_ai

# æ‡‰ç”¨è¨­å®š
# SECRET_KEY å¿…é ˆè¨­å®šç‚ºä¸€å€‹å¼·éš¨æ©Ÿå­—ä¸²ï¼ˆè‡³å°‘ 32 å­—å…ƒï¼‰
# å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼šopenssl rand -hex 32
SECRET_KEY=your-secret-key-here  # âš ï¸ è«‹æ›¿æ›ç‚ºå¯¦éš›çš„éš¨æ©Ÿå­—ä¸²
```

**ç”Ÿæˆ SECRET_KEY**ï¼š

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€å€‹å®‰å…¨çš„éš¨æ©Ÿ SECRET_KEYï¼š

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ opensslï¼ˆæ¨è–¦ï¼‰
openssl rand -hex 32

# æ–¹æ³•äºŒï¼šä½¿ç”¨ Python
python -c "import secrets; print(secrets.token_hex(32))"
```

å°‡ç”Ÿæˆçš„çµæœè¤‡è£½åˆ° `.env` æª”æ¡ˆä¸­çš„ `SECRET_KEY=` å¾Œé¢ã€‚

âš ï¸ **é‡è¦**ï¼šä¸è¦ä½¿ç”¨é è¨­å€¼ `your-secret-key-here`ï¼Œé€™æœƒå°è‡´æ‡‰ç”¨ç¨‹å¼ç„¡æ³•å•Ÿå‹•ã€‚

### 3. åˆå§‹åŒ–è³‡æ–™åº«

**æ–¹å¼ä¸€ï¼šä½¿ç”¨è³‡æ–™åº«ç®¡ç†è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**

åˆå§‹åŒ–è³‡æ–™åº«ï¼ˆå¦‚æœä¸å­˜åœ¨å‰‡å‰µå»ºï¼‰ï¼š

```bash
python database/database_manager.py init
```

æˆ–ç›´æ¥åŸ·è¡Œï¼ˆé è¨­ç‚º init æ¨¡å¼ï¼‰ï¼š

```bash
python database/database_manager.py
```

è…³æœ¬æœƒè‡ªå‹•åŸ·è¡Œï¼š

1. å‰µå»ºè³‡æ–™åº«ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. åŸ·è¡Œå®Œæ•´è³‡æ–™åº«åˆå§‹åŒ–ï¼ˆ`database/init_database.sql`ï¼‰
    - åŒ…å«ï¼šè¡¨çµæ§‹ã€è¦–åœ–ã€å‡½æ•¸ã€è§¸ç™¼å™¨ã€åœ–ç‰‡å­˜å„²åŠŸèƒ½ã€prediction_log è¡¨ã€ç—…å®³è³‡è¨Šè³‡æ–™

**æ–¹å¼äºŒï¼šé‡ç½®è³‡æ–™åº«ï¼ˆåˆªé™¤ä¸¦é‡æ–°å‰µå»ºï¼‰**

```bash
python database/database_manager.py reset
```

âš ï¸ **è­¦å‘Š**ï¼šæ­¤æ“ä½œå°‡åˆªé™¤æ‰€æœ‰ç¾æœ‰è³‡æ–™ï¼
è…³æœ¬æœƒè‡ªå‹•åŸ·è¡Œï¼š

1. åˆªé™¤ç¾æœ‰è³‡æ–™åº«
2. å‰µå»ºæ–°è³‡æ–™åº«
3. åŸ·è¡Œå®Œæ•´è³‡æ–™åº«åˆå§‹åŒ–ï¼ˆ`database/init_database.sql`ï¼‰
    - åŒ…å«ï¼šè¡¨çµæ§‹ã€è¦–åœ–ã€å‡½æ•¸ã€è§¸ç™¼å™¨ã€åœ–ç‰‡å­˜å„²åŠŸèƒ½ã€prediction_log è¡¨ã€ç—…å®³è³‡è¨Šè³‡æ–™

**æ–¹å¼ä¸‰ï¼šæ‰‹å‹•åŸ·è¡Œ SQL**

```bash
# å…ˆå‰µå»ºè³‡æ–™åº«
createdb -U postgres -p 5433 leaf_disease_ai

# åŸ·è¡Œå®Œæ•´è³‡æ–™åº«åˆå§‹åŒ–ï¼ˆåŒ…å«æ‰€æœ‰å…§å®¹ï¼‰
psql -U postgres -d leaf_disease_ai -p 5433 -f database/init_database.sql
```

**æ³¨æ„**ï¼šå¦‚æœä½¿ç”¨éé è¨­ç«¯å£ï¼ˆå¦‚ 5433ï¼‰ï¼Œè«‹åœ¨ `.env` ä¸­è¨­å®š `DB_PORT=5433`

### 4. å•Ÿå‹• Redisï¼ˆå¯é¸ä½†å»ºè­°ï¼‰

**macOS:**

```bash
brew install redis
brew services start redis
```

**Linux:**

```bash
sudo apt-get install redis-server
sudo systemctl start redis
```

**Windows:**
ä¸‹è¼‰ä¸¦å®‰è£ Redis for Windowsï¼Œæˆ–ä½¿ç”¨ Dockerï¼š

```bash
docker run -d -p 6379:6379 redis:latest
```

### 5. å•Ÿå‹•æœå‹™

**æ–¹å¼ä¸€ï¼šä½¿ç”¨å•Ÿå‹•è…³æœ¬**

```bash
chmod +x scripts/start.sh
./scripts/start.sh
```

**æ–¹å¼äºŒï¼šæ‰‹å‹•å•Ÿå‹•**

å¾Œç«¯ï¼š

```bash
cd backend
python app.py
```

å‰ç«¯ï¼š

```bash
cd frontend
npm run dev
```

## API æ–‡æª”

å•Ÿå‹•å¾Œç«¯æœå‹™å¾Œï¼Œè¨ªå• Swagger API æ–‡æª”ï¼š

-   **Swagger UI**: http://localhost:5000/api-docs
-   **API Spec JSON**: http://localhost:5000/apispec.json

## ç›®éŒ„çµæ§‹

```
Leaf_Disease_AI_local/
â”œâ”€â”€ backend/                    # Flask å¾Œç«¯
â”‚   â”œâ”€â”€ app.py                  # ä¸»æ‡‰ç”¨ç¨‹å¼ï¼ˆè·¯ç”±å®šç¾©ï¼‰
â”‚   â”œâ”€â”€ modules/                # AI æ¨¡å‹æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ cnn_*.py            # CNN ç›¸é—œæ¨¡çµ„
â”‚   â”‚   â””â”€â”€ yolo_*.py           # YOLO ç›¸é—œæ¨¡çµ„
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡çµ„
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ core_app_config.py    # æ‡‰ç”¨ç¨‹å¼é…ç½®å’Œåˆå§‹åŒ–
â”‚       â”‚   â”œâ”€â”€ core_db_manager.py    # è³‡æ–™åº«ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ core_helpers.py       # æ ¸å¿ƒè¼”åŠ©å‡½æ•¸ï¼ˆèªè­‰ã€æ—¥èªŒï¼‰
â”‚       â”‚   â”œâ”€â”€ core_redis_manager.py # Redis å¿«å–ç®¡ç†
â”‚       â”‚   â””â”€â”€ core_user_manager.py  # ä½¿ç”¨è€…ç®¡ç†
â”‚       â””â”€â”€ services/           # æ¥­å‹™æœå‹™
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ service_auth.py              # èªè­‰æœå‹™
â”‚           â”œâ”€â”€ service_cnn.py                # CNN åˆ†é¡æœå‹™
â”‚           â”œâ”€â”€ service_cloudinary.py         # Cloudinary å„²å­˜æœå‹™
â”‚           â”œâ”€â”€ service_image.py              # åœ–ç‰‡è™•ç†æœå‹™
â”‚           â”œâ”€â”€ service_image_manager.py      # åœ–ç‰‡ç®¡ç†å™¨
â”‚           â”œâ”€â”€ service_integrated.py         # æ•´åˆæª¢æ¸¬æœå‹™
â”‚           â”œâ”€â”€ service_integrated_api.py     # æ•´åˆæª¢æ¸¬ API æœå‹™
â”‚           â”œâ”€â”€ service_user.py               # ä½¿ç”¨è€…æœå‹™
â”‚           â”œâ”€â”€ service_yolo.py               # YOLO æª¢æ¸¬æœå‹™
â”‚           â””â”€â”€ service_yolo_api.py           # YOLO æª¢æ¸¬ API æœå‹™
â”œâ”€â”€ config/                     # é…ç½®æª”æ¡ˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py                 # åŸºç¤é…ç½®
â”‚   â”œâ”€â”€ development.py           # é–‹ç™¼ç’°å¢ƒé…ç½®
â”‚   â””â”€â”€ production.py           # ç”Ÿç”¢ç’°å¢ƒé…ç½®
â”œâ”€â”€ database/                   # è³‡æ–™åº«è…³æœ¬å’Œå·¥å…·
â”‚   â”œâ”€â”€ init_database.sql       # å®Œæ•´è³‡æ–™åº«åˆå§‹åŒ–
â”‚   â”œâ”€â”€ database_manager.py     # è³‡æ–™åº«ç®¡ç†è…³æœ¬ï¼ˆinit/resetï¼‰
â”‚   â”œâ”€â”€ README.md               # è³‡æ–™åº«èªªæ˜
â”‚   â””â”€â”€ SQL_REFERENCE.md        # SQL èªå¥åƒè€ƒæ–‡æª”
â”œâ”€â”€ docs/                       # æ–‡æª”
â”‚   â”œâ”€â”€ complete_documentation.md # å®Œæ•´ç³»çµ±æ–‡æª”
â”‚   â””â”€â”€ sequences_diagram.md    # ç³»çµ±åºåˆ—åœ–
â”œâ”€â”€ frontend/                   # React å‰ç«¯ï¼ˆTailwind CSS 3.xï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api.js              # API èª¿ç”¨å°è£
â”‚   â”‚   â”œâ”€â”€ App.jsx             # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.jsx            # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ styles.css          # Tailwind CSS å…¥å£æ–‡ä»¶ï¼ˆ@tailwind æŒ‡ä»¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ pages/              # é é¢çµ„ä»¶ï¼ˆä¸€å€‹æª”æ¡ˆä¸€å€‹é é¢ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx    # ç™»å…¥é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.jsx     # HOME é é¢ï¼ˆæª¢æ¸¬åŠŸèƒ½ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryPage.jsx  # HISTORY é é¢ï¼ˆæª¢æ¸¬æ­·å²ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ AccountPage.jsx  # ACCOUNT é é¢ï¼ˆå¸³è™Ÿè¨­å®šï¼‰
â”‚   â”‚   â””â”€â”€ components/         # å…±ç”¨çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ ProtectedRoute.jsx      # è·¯ç”±å®ˆè¡›ï¼ˆä¿è­·éœ€è¦ç™»å…¥çš„è·¯ç”±ï¼‰
â”‚   â”‚       â”œâ”€â”€ ResponsiveNavbar.jsx   # éŸ¿æ‡‰å¼å°è¦½åˆ—
â”‚   â”‚       â”œâ”€â”€ AuthView.jsx            # èªè­‰è¦–åœ–
â”‚   â”‚       â”œâ”€â”€ AppLayout.jsx           # æ‡‰ç”¨ä½ˆå±€ï¼ˆåŒ…å«è·¯ç”±ï¼‰
â”‚   â”‚       â”œâ”€â”€ ImageCropper.jsx        # åœ–ç‰‡è£åˆ‡çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ CameraView.jsx          # ç›¸æ©Ÿè¦–åœ–çµ„ä»¶
â”‚   â”‚       â””â”€â”€ LeafDetectionView.jsx   # è‘‰ç‰‡æª¢æ¸¬è¦–åœ–
â”‚   â”œâ”€â”€ tailwind.config.js      # Tailwind ä¸»é¡Œé…ç½®ï¼ˆES æ¨¡çµ„ï¼‰
â”‚   â”œâ”€â”€ postcss.config.js       # PostCSS é…ç½®ï¼ˆES æ¨¡çµ„ï¼‰
â”‚   â”œâ”€â”€ package.json            # åŒ…å« "type": "module"
â”‚   â””â”€â”€ vite.config.mts         # Vite é…ç½®
â”œâ”€â”€ model/                      # AI æ¨¡å‹
â”‚   â”œâ”€â”€ CNN/                    # CNN æ¨¡å‹
â”‚   â”‚   â””â”€â”€ CNN_v1.0_20251204/
â”‚   â””â”€â”€ yolov11/                # YOLO æ¨¡å‹
â”‚       â””â”€â”€ best_v1_50.pt
â”œâ”€â”€ scripts/                    # è…³æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ start.sh                # å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ tests/                      # æ¸¬è©¦æ–‡ä»¶ï¼ˆé ç•™ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ uploads/                    # ä¸Šå‚³åœ–ç‰‡æš«å­˜ï¼ˆè‡ªå‹•å‰µå»ºï¼‰
â”œâ”€â”€ .env.example                # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Python ä¾è³´
â””â”€â”€ README.md                   # å°ˆæ¡ˆèªªæ˜æ–‡æª”
```

## ä¸»è¦åŠŸèƒ½èªªæ˜

### Redis å¿«å–

ç³»çµ±ä½¿ç”¨ Redis é€²è¡Œä»¥ä¸‹å¿«å–ï¼š

-   **ä½¿ç”¨è€…çµ±è¨ˆè³‡æ–™**ï¼šå¿«å– 5 åˆ†é˜
-   **æª¢æ¸¬çµæœ**ï¼šå¿«å– 1 å°æ™‚ï¼ˆåŸºæ–¼åœ–ç‰‡ hashï¼‰
-   **ç™»å…¥å˜—è©¦é™åˆ¶**ï¼šé˜²æ­¢æš´åŠ›ç ´è§£

å¦‚æœ Redis æœªå®‰è£æˆ–ç„¡æ³•é€£æ¥ï¼Œç³»çµ±æœƒè‡ªå‹•é™ç´šï¼Œä¸å½±éŸ¿åŸºæœ¬åŠŸèƒ½ã€‚

### Swagger API æ–‡æª”

æ‰€æœ‰ API ç«¯é»éƒ½æœ‰å®Œæ•´çš„ Swagger æ–‡æª”ï¼ŒåŒ…æ‹¬ï¼š

-   è«‹æ±‚åƒæ•¸èªªæ˜
-   å›æ‡‰æ ¼å¼ç¯„ä¾‹
-   éŒ¯èª¤ç¢¼èªªæ˜
-   ç·šä¸Šæ¸¬è©¦åŠŸèƒ½

### API ç«¯é»

#### èªè­‰ç›¸é—œ

-   `POST /register` - ä½¿ç”¨è€…è¨»å†Š
-   `POST /login` - ä½¿ç”¨è€…ç™»å…¥
-   `GET/POST /logout` - ä½¿ç”¨è€…ç™»å‡º
-   `GET /check-auth` - æª¢æŸ¥ç™»å…¥ç‹€æ…‹

#### ä½¿ç”¨è€…ç›¸é—œ

-   `GET /user/profile` - ç²å–å€‹äººè³‡æ–™
-   `POST /user/change-password` - ä¿®æ”¹å¯†ç¢¼
-   `GET /user/stats` - ç²å–çµ±è¨ˆè³‡æ–™ï¼ˆå¿«å–ï¼‰

#### æª¢æ¸¬ç›¸é—œ

-   `POST /api/predict` - æ•´åˆæª¢æ¸¬ï¼ˆCNN + YOLOï¼Œå¿«å–ï¼‰
-   `POST /api/predict-crop` - è£åˆ‡å¾Œé‡æ–°æª¢æ¸¬
-   `POST /predict` - èˆŠç‰ˆæª¢æ¸¬ç«¯é»ï¼ˆå‘å¾Œå…¼å®¹ï¼‰
-   `GET /history` - ç²å–æª¢æ¸¬æ­·å²

## é–‹ç™¼èªªæ˜

-   **å¾Œç«¯é…ç½®**ï¼šä½¿ç”¨ `config.development.DevelopmentConfig`
-   **è³‡æ–™åº«**ï¼šPostgreSQLï¼Œé€£æ¥è³‡è¨Šåœ¨ `.env` ä¸­è¨­å®š
-   **å¿«å–**ï¼šRedisï¼ˆå¯é¸ï¼‰ï¼Œé…ç½®åœ¨ `.env` ä¸­è¨­å®š
-   **å‰ç«¯**ï¼šVite dev server + React Router + Tailwind CSS 3.xï¼Œè‡ªå‹• proxy åˆ°å¾Œç«¯
-   **å‰ç«¯è·¯ç”±**ï¼šä½¿ç”¨ React Router DOM 7.x å¯¦ç¾ URL è·¯ç”±ï¼Œæ”¯æ´ç€è¦½å™¨å°èˆªå’Œè·¯ç”±å®ˆè¡›
-   **å‰ç«¯æ¨£å¼**ï¼šä½¿ç”¨ Tailwind CSS 3.4.19 + PostCSS 8.5.6ï¼Œä¸»é¡Œé…ç½®åœ¨ `frontend/tailwind.config.js`
-   **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šæ”¯æ´æ‰‹æ©Ÿï¼ˆåº•éƒ¨å°è¦½åˆ—ï¼‰ã€å¹³æ¿ã€æ¡Œé¢ï¼ˆé ‚éƒ¨å°è¦½åˆ—ï¼‰ä¸‰ç¨®ä½ˆå±€
-   **é é¢çµæ§‹**ï¼šä½¿ç”¨ `pages/` ç›®éŒ„çµ„ç¹”é é¢çµ„ä»¶ï¼Œ`components/` ç›®éŒ„å­˜æ”¾å…±ç”¨çµ„ä»¶
-   **æ¨¡çµ„ç³»çµ±**ï¼šä½¿ç”¨ ES æ¨¡çµ„ï¼ˆ`"type": "module"`ï¼‰ï¼Œæ‰€æœ‰é…ç½®æª”æ¡ˆä½¿ç”¨ ES æ¨¡çµ„èªæ³•

## æ³¨æ„äº‹é …

1. æ­¤å°ˆæ¡ˆåƒ…ç”¨æ–¼æœ¬åœ°ç«¯é–‹ç™¼ï¼Œä¸é©åˆç›´æ¥éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ
2. ç¢ºä¿ PostgreSQL å’Œ Redis æœå‹™å·²å•Ÿå‹•
3. æ¨¡å‹æª”æ¡ˆ `model/yolov11/best_v1_50.pt` éœ€è¦å­˜åœ¨
4. åœ–ç‰‡å„²å­˜ï¼š
    - **Cloudinaryï¼ˆæ¨è–¦ï¼‰**ï¼šåœ–ç‰‡ç¾åœ¨å®Œå…¨å„²å­˜åœ¨ Cloudinary é›²ç«¯ï¼Œä¸å†å„²å­˜åœ¨è³‡æ–™åº« BLOB
    - é è¨­å•Ÿç”¨ Cloudinaryï¼Œéœ€è¦åœ¨ `.env` ä¸­è¨­å®š `CLOUDINARY_API_SECRET`
    - å¦‚æœæœªè¨­å®š Cloudinaryï¼Œç³»çµ±æœƒä½¿ç”¨æœ¬åœ°æ–‡ä»¶å„²å­˜ï¼ˆ`uploads/` ç›®éŒ„ï¼‰
    - è³‡æ–™åº«å„ªåŒ–å·²åŒ…å«åœ¨ `init_database.sql` ä¸­ï¼Œç„¡éœ€å–®ç¨åŸ·è¡Œ

## æ•…éšœæ’é™¤

### è³‡æ–™åº«ä¸å­˜åœ¨éŒ¯èª¤

å¦‚æœçœ‹åˆ° "database 'leaf_disease_ai' does not exist" éŒ¯èª¤ï¼š

1. **ä½¿ç”¨è³‡æ–™åº«ç®¡ç†è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**ï¼š

    ```bash
    python database/database_manager.py init
    ```

    æˆ–ç›´æ¥åŸ·è¡Œï¼š

    ```bash
    python database/database_manager.py
    ```

2. **æˆ–æ‰‹å‹•å‰µå»ºè³‡æ–™åº«**ï¼š

    ```bash
    # å‰µå»ºè³‡æ–™åº«
    createdb -U postgres -p 5433 leaf_disease_ai

    # åŸ·è¡Œå®Œæ•´è³‡æ–™åº«åˆå§‹åŒ–ï¼ˆåŒ…å«æ‰€æœ‰å…§å®¹ï¼‰
    psql -U postgres -d leaf_disease_ai -p 5433 -f database/init_database.sql
    ```

### è³‡æ–™åº«é€£æ¥å¤±æ•—

-   æª¢æŸ¥ PostgreSQL æœå‹™æ˜¯å¦é‹è¡Œï¼š`pg_isready -p 5433`
-   ç¢ºèª `.env` ä¸­çš„è³‡æ–™åº«è¨­å®šæ­£ç¢ºï¼ˆç‰¹åˆ¥æ˜¯ `DB_PORT`ï¼‰
-   ç¢ºèªè³‡æ–™åº«ä½¿ç”¨è€…æœ‰å‰µå»ºè³‡æ–™åº«çš„æ¬Šé™

### SECRET_KEY æœªè¨­å®šéŒ¯èª¤

å¦‚æœçœ‹åˆ° "SECRET_KEY æœªè¨­å®šæˆ–ä½¿ç”¨é è¨­å€¼" çš„éŒ¯èª¤ï¼š

1. **ä½¿ç”¨å•Ÿå‹•è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**ï¼š

    - å•Ÿå‹•è…³æœ¬æœƒè‡ªå‹•ç”Ÿæˆä¸€å€‹è‡¨æ™‚çš„ SECRET_KEY
    - ä½†å»ºè­°æ‰‹å‹•è¨­å®šåˆ° `.env` æª”æ¡ˆä¸­

2. **æ‰‹å‹•ç”Ÿæˆä¸¦è¨­å®š**ï¼š

    ```bash
    # ç”Ÿæˆ SECRET_KEY
    openssl rand -hex 32

    # å°‡çµæœæ·»åŠ åˆ° .env æª”æ¡ˆ
    # SECRET_KEY=<ç”Ÿæˆçš„çµæœ>
    ```

3. **ç¢ºèª .env æª”æ¡ˆå­˜åœ¨**ï¼š
    - ç¢ºèªå°ˆæ¡ˆæ ¹ç›®éŒ„æœ‰ `.env` æª”æ¡ˆ
    - ç¢ºèª `SECRET_KEY` è¡Œæ²’æœ‰è¢«è¨»é‡‹ï¼ˆä¸æ˜¯ä»¥ `#` é–‹é ­ï¼‰
    - ç¢ºèª `SECRET_KEY` ä¸æ˜¯é è¨­å€¼ `your-secret-key-here`

### Redis é€£æ¥å¤±æ•—

å¦‚æœçœ‹åˆ° "âš ï¸ Redis é€£æ¥å¤±æ•—" çš„è­¦å‘Šï¼Œç³»çµ±ä»å¯æ­£å¸¸é‹è¡Œï¼Œåªæ˜¯ä¸æœƒä½¿ç”¨å¿«å–åŠŸèƒ½ã€‚ç¢ºä¿ Redis æœå‹™å·²å•Ÿå‹•ï¼š

```bash
redis-cli ping  # æ‡‰è©²è¿”å› PONG
```

### æ¨¡å‹è¼‰å…¥å¤±æ•—

ç¢ºä¿æ¨¡å‹æª”æ¡ˆè·¯å¾‘æ­£ç¢ºï¼š`model/yolov11/best_v1_50.pt`

### å‰ç«¯æ¨£å¼å•é¡Œ

å¦‚æœå‰ç«¯æ¨£å¼é¡¯ç¤ºç•°å¸¸ï¼ˆhttp://localhost:5173 ç„¡æ³•æ­£ç¢ºé¡¯ç¤ºï¼‰ï¼š

1. **åŸ·è¡Œä¿®å¾©è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**ï¼š

    ```bash
    cd frontend
    ./fix-tailwind.sh
    ```

2. **æ‰‹å‹•ä¿®å¾©æ­¥é©Ÿ**ï¼š

    ```bash
    cd frontend

    # æ¸…é™¤ä¸¦é‡æ–°å®‰è£
    rm -rf node_modules package-lock.json
    npm install

    # ç¢ºèª Tailwind CSS å·²å®‰è£
    npm install -D tailwindcss@^3.4.19 postcss@^8.5.6 autoprefixer@^10.4.22

    # é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
    npm run dev
    ```

3. **æª¢æŸ¥é…ç½®æª”æ¡ˆ**ï¼š

    - ç¢ºèª `tailwind.config.js` å­˜åœ¨ä¸” `content` è·¯å¾‘æ­£ç¢º
    - ç¢ºèª `postcss.config.js` å­˜åœ¨ä¸”åŒ…å« `tailwindcss` å’Œ `autoprefixer`
    - ç¢ºèª `src/styles.css` åŒ…å« `@tailwind` æŒ‡ä»¤
    - ç¢ºèª `src/main.jsx` å°å…¥ `./styles.css`

4. **æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°**ï¼š

    - æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰
    - æª¢æŸ¥ Console æ˜¯å¦æœ‰éŒ¯èª¤
    - æª¢æŸ¥ Network æ¨™ç±¤ï¼Œç¢ºèª CSS æª”æ¡ˆæ˜¯å¦è¼‰å…¥
    - æª¢æŸ¥ Elements æ¨™ç±¤ï¼Œç¢ºèª `<head>` ä¸­æ˜¯å¦æœ‰æ¨£å¼

5. **æª¢æŸ¥è·¯ç”±å•é¡Œ**ï¼š

    - ç¢ºèª `react-router-dom` å·²æ­£ç¢ºå®‰è£
    - ç¢ºèªæ‰€æœ‰é é¢çµ„ä»¶éƒ½åœ¨ `pages/` ç›®éŒ„ä¸­
    - ç¢ºèª `App.jsx` ä¸­çš„è·¯ç”±é…ç½®æ­£ç¢º

6. **å¦‚æœå•é¡Œä»ç„¶å­˜åœ¨**ï¼š

    æª¢æŸ¥ `package.json` ä¸­çš„è…³æœ¬æ˜¯å¦ä½¿ç”¨ `npx vite`ï¼ˆå¦‚æœ vite æœªæ­£ç¢ºå®‰è£ï¼‰

## å‰ç«¯æŠ€è¡“æ£§

## å‰ç«¯æŠ€è¡“æ£§

### React Router

å‰ç«¯ä½¿ç”¨ **React Router DOM 7.10.1** é€²è¡Œè·¯ç”±ç®¡ç†ï¼š

-   **è·¯ç”±åˆ—è¡¨**ï¼š

    -   `/` - æ ¹æ“šç™»å…¥ç‹€æ…‹é‡å®šå‘åˆ° `/home` æˆ– `/login`
    -   `/login` - ç™»å…¥/è¨»å†Šé é¢
    -   `/home` - HOME é é¢ï¼ˆæª¢æ¸¬åŠŸèƒ½åŠå–®æ¬¡æª¢æ¸¬çµæœï¼‰
    -   `/history` - HISTORY é é¢ï¼ˆæª¢æ¸¬æ­·å²è¨˜éŒ„ï¼‰
    -   `/account` - ACCOUNT é é¢ï¼ˆå¸³è™Ÿè¨­å®šï¼‰

-   **è·¯ç”±å®ˆè¡›**ï¼š`ProtectedRoute` çµ„ä»¶è‡ªå‹•ä¿è­·éœ€è¦ç™»å…¥çš„è·¯ç”±

-   **ç€è¦½å™¨å°èˆª**ï¼šæ”¯æ´å‰é€²/å¾Œé€€æŒ‰éˆ•å’Œç›´æ¥ URL è¨ªå•

#### Tailwind CSS 3.x

å‰ç«¯ä½¿ç”¨ **Tailwind CSS 3.4.19** ä½œç‚ºæ¨£å¼æ¡†æ¶ï¼š

-   **é…ç½®æ–¹å¼**ï¼š

    -   ä½¿ç”¨ PostCSS è™•ç†ï¼ˆ`postcss.config.js`ï¼‰
    -   ä½¿ç”¨å‚³çµ±çš„ `@tailwind` æŒ‡ä»¤ï¼ˆ`@tailwind base;`, `@tailwind components;`, `@tailwind utilities;`ï¼‰
    -   ä¸»é¡Œé…ç½®åœ¨ `tailwind.config.js`ï¼ˆES æ¨¡çµ„æ ¼å¼ï¼‰

-   **ä¸»é¡Œé…ç½®**ï¼š`frontend/tailwind.config.js`

    -   é›†ä¸­ç®¡ç†é¡è‰²ã€å­—é«”ã€é–“è·ç­‰è¨­è¨ˆç³»çµ±
    -   æ”¯æ´æ·±è‰²æ¨¡å¼ï¼ˆclass æ¨¡å¼ï¼‰
    -   è‡ªå®šç¾©æ–·é»å’Œå·¥å…·é¡åˆ¥

-   **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼š

    -   æ‰‹æ©Ÿç‰ˆï¼ˆ< 768pxï¼‰ï¼šåº•éƒ¨å›ºå®šå°è¦½åˆ—
    -   å¹³æ¿ç‰ˆï¼ˆ768px - 1024pxï¼‰ï¼šæ¡Œé¢ä½ˆå±€ï¼Œèª¿æ•´å°ºå¯¸
    -   æ¡Œé¢ç‰ˆï¼ˆâ‰¥ 1024pxï¼‰ï¼šé ‚éƒ¨å°è¦½åˆ—ï¼Œæ”¯æ´æ¼¢å ¡é¸å–®

-   **è‡ªå®šç¾©çµ„ä»¶æ¨£å¼**ï¼šåœ¨ `src/styles.css` ä¸­ä½¿ç”¨ `@layer components` å®šç¾©

-   **æ¨¡çµ„ç³»çµ±**ï¼š`package.json` åŒ…å« `"type": "module"`ï¼Œæ‰€æœ‰é…ç½®æª”æ¡ˆä½¿ç”¨ ES æ¨¡çµ„èªæ³•

### å»ºç½®å‰ç«¯

**é–‹ç™¼æ¨¡å¼**ï¼š

```bash
cd frontend
npm run dev
```

é–‹ç™¼æœå‹™å™¨æœƒè‡ªå‹•ä½¿ç”¨ `npx vite` å•Ÿå‹•ï¼Œå³ä½¿ vite æœªå®‰è£åœ¨æœ¬åœ°ä¹Ÿæœƒè‡ªå‹•ä¸‹è¼‰ã€‚

**ç”Ÿç”¢å»ºç½®**ï¼š

```bash
cd frontend
npm run build
```

å»ºç½®å¾Œçš„æª”æ¡ˆæœƒåœ¨ `frontend/dist/` ç›®éŒ„ä¸­ã€‚

**æ³¨æ„**ï¼šç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æ™‚ï¼Œéœ€è¦é…ç½®æœå‹™å™¨æ”¯æ´ SPA è·¯ç”±ï¼ˆæ‰€æœ‰è·¯ç”±éƒ½è¿”å› `index.html`ï¼‰ã€‚

## ç‰ˆæœ¬è³‡è¨Š

-   **ç‰ˆæœ¬**: 2.1.0
-   **æ¨¡å¼**: æœ¬åœ°ç«¯é–‹ç™¼
-   **å‰ç«¯æ¡†æ¶**: React 18.3.1 + React Router DOM 7.10.1 + Vite 5.4.21 + Tailwind CSS 3.4.19 + PostCSS 8.5.6
-   **æœ€å¾Œæ›´æ–°**: 2024-12-11
