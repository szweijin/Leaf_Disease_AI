# ğŸŒ¿ Leaf Disease AI

> ä½¿ç”¨ YOLOv11 æ·±åº¦å­¸ç¿’æ¨¡å‹é€²è¡Œæ¤ç‰©è‘‰ç‰‡ç—…å®³æª¢æ¸¬çš„ç¾ä»£åŒ– Web æ‡‰ç”¨

![Python](https://img.shields.io/badge/Python-3.8+-3776ab?style=flat-square&logo=python)
![Flask](https://img.shields.io/badge/Flask-3.0+-000000?style=flat-square&logo=flask)
![YOLOv11](https://img.shields.io/badge/YOLOv11-Latest-00457C?style=flat-square&logo=yolo)
![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)

## ğŸ“‹ ç›®éŒ„

- [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [æŠ€è¡“å †æ£§](#æŠ€è¡“å †æ£§)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [API æ–‡æª”](#api-æ–‡æª”)
- [æª”æ¡ˆçµæ§‹](#æª”æ¡ˆçµæ§‹)
- [å¯†ç¢¼è¦æ±‚](#å¯†ç¢¼è¦æ±‚)
- [ç”Ÿç”¢éƒ¨ç½²](#ç”Ÿç”¢éƒ¨ç½²)
- [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

## ğŸ“– å°ˆæ¡ˆæ¦‚è¿°

Leaf Disease AI æ˜¯ä¸€å€‹æ™ºèƒ½æ¤ç‰©è‘‰ç‰‡ç—…å®³æª¢æ¸¬ç³»çµ±ï¼Œä½¿ç”¨å…ˆé€²çš„ YOLOv11 ç‰©é«”æª¢æ¸¬æ¨¡å‹å¯¦ç¾é«˜ç²¾åº¦çš„ç—…å®³è­˜åˆ¥ã€‚è©²æ‡‰ç”¨æ¡ç”¨ç¾ä»£åŒ–çš„ Web + App æ··åˆè¨­è¨ˆï¼Œæä¾›ç›´è§€çš„ä½¿ç”¨è€…ä»‹é¢å’Œæµæš¢çš„ä½¿ç”¨é«”é©—ã€‚

**é©ç”¨å ´æ™¯**ï¼š

- è¾²æ¥­ç¨®æ¤æˆ¶é€²è¡Œç”°é–“ç—…å®³ç›£æ¸¬
- è¾²æŠ€æœå‹™ä¸­å¿ƒç—…å®³è¨ºæ–·
- è¾²æ¥­ç ”ç©¶æ©Ÿæ§‹æ•¸æ“šæ¡é›†
- æ•™è‚²æ©Ÿæ§‹æ•™å­¸æ¼”ç¤º

## âœ¨ ä¸»è¦åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ” **å¸³æˆ¶ç®¡ç†**

  - éƒµç®±è¨»å†Šèˆ‡ç™»å…¥
  - å¯†ç¢¼åŠ å¯†å­˜å„²
  - è¤‡é›œåº¦é©—è­‰
  - ç™»å‡ºæ¸…ç†

- ğŸ–¼ï¸ **åœ–åƒåˆ†æ**

  - å¯¦æ™‚ç—…å®³æª¢æ¸¬
  - åš´é‡ç¨‹åº¦è©•ä¼°
  - ç½®ä¿¡åº¦è©•åˆ†
  - åœ–åƒé è¦½å±•ç¤º

- ğŸ“Š **æª¢æ¸¬è¨˜éŒ„**

  - æ­·å²ç´€éŒ„æŸ¥è©¢
  - æŒ‰ä½¿ç”¨è€…éš”é›¢
  - æ™‚é–“æˆ³è¨˜
  - åœ–åƒå­˜å„²

- ğŸ‘¤ **å¸³è™Ÿä¸­å¿ƒ**
  - å€‹äººè³‡è¨ŠæŸ¥çœ‹
  - å¯†ç¢¼ä¿®æ”¹
  - å¸³è™Ÿå»ºç«‹æ™‚é–“è¨˜éŒ„
  - æœ€å¾Œç™»å…¥æ™‚é–“è¿½è¹¤
  - æª¢æ¸¬çµ±è¨ˆåˆ†æ
  - ç—…å®³åˆ†å¸ƒåœ–è¡¨

### ç”¨æˆ¶é«”é©—

- ğŸ¨ **ç¾ä»£åŒ– UI è¨­è¨ˆ**

  - æ¼¸è®Šè‰²èƒŒæ™¯
  - éŸ¿æ‡‰å¼ä½ˆå±€
  - æµæš¢å‹•ç•«æ•ˆæœ
  - é©é…å„é¡è¨­å‚™

- ğŸ“± **è·¨å¹³å°æ”¯æŒ**
  - æ¡Œé¢ç€è¦½å™¨å„ªåŒ–
  - å¹³æ¿è¨­å‚™é©é…
  - æ‰‹æ©Ÿå…¨å±æ”¯æŒ

## ğŸ› ï¸ æŠ€è¡“å †æ£§

| åˆ†é¡         | æŠ€è¡“               | ç‰ˆæœ¬   |
| ------------ | ------------------ | ------ |
| **å¾Œç«¯æ¡†æ¶** | Flask              | 3.0+   |
| **æ©Ÿå™¨å­¸ç¿’** | YOLOv11            | Latest |
| **å‰ç«¯æ¡†æ¶** | Bootstrap          | 5.3.0  |
| **å‰ç«¯èªè¨€** | HTML5 + JavaScript | ES6+   |
| **å¯†ç¢¼å®‰å…¨** | Werkzeug           | 2.0+   |
| **è³‡æ–™å­˜å„²** | JSON               | Native |
| **ä¼ºæœå™¨**   | Gunicorn           | 21.0+  |

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚

```bash
# æª¢æŸ¥ Python ç‰ˆæœ¬
python --version  # éœ€è¦ 3.8 æˆ–ä»¥ä¸Š

# ç¢ºä¿å·²å®‰è£ pip
pip --version
```

### å®‰è£æ­¥é©Ÿ

1. **è¤‡è£½ä¸¦é€²å…¥å°ˆæ¡ˆç›®éŒ„**

```bash
git clone <repository-url>
cd Leaf_Disease_AI
```

2. **å®‰è£ä¾è³´å¥—ä»¶**

```bash
pip install -r requirements.txt
```

3. **é©—è­‰æ¨¡å‹æª”æ¡ˆ**

```bash
# ç¢ºä¿ yolov11/best.pt å­˜åœ¨
ls -la yolov11/best.pt
```

4. **åˆå§‹åŒ–è³‡æ–™ç›®éŒ„**

```bash
mkdir -p data static/uploads
```

5. **é‹è¡Œæ‡‰ç”¨**

```bash
# é–‹ç™¼æ¨¡å¼
python app.py

# æˆ–ä½¿ç”¨ Gunicornï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

6. **è¨ªå•æ‡‰ç”¨**

```
http://localhost:5000
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç¬¬ä¸€æ¬¡ä½¿ç”¨

1. **å»ºç«‹å¸³æˆ¶**

   - é»æ“Šã€Œç«‹å³è¨»å†Šã€
   - è¼¸å…¥æœ‰æ•ˆçš„éƒµç®±åœ°å€
   - è¨­ç½®ç¬¦åˆè¦æ±‚çš„å¯†ç¢¼
   - é»æ“Šã€Œè¨»å†Šã€å®Œæˆè¨»å†Š

2. **ç™»å…¥ç³»çµ±**

   - å›åˆ°ç™»å…¥è¡¨å–®
   - è¼¸å…¥éƒµç®±å’Œå¯†ç¢¼
   - é»æ“Šã€Œç™»å…¥ã€é€²å…¥ä¸»æ‡‰ç”¨

3. **ä¸Šå‚³åœ–åƒ**

   - é»æ“Šä¸Šå‚³å€åŸŸæˆ–æ‹–æ”¾åœ–åƒ
   - é è¦½åœ–åƒç¢ºä¿æ­£ç¢º
   - é»æ“Šã€Œé–‹å§‹åˆ†æã€æŒ‰éˆ•

4. **æŸ¥çœ‹çµæœ**

   - å½ˆçª—é¡¯ç¤ºæª¢æ¸¬çµæœ
   - åŒ…å«ç—…å®³é¡å‹ã€åš´é‡ç¨‹åº¦ã€ç½®ä¿¡åº¦
   - é»æ“Šã€Œé—œé–‰ã€è¿”å›ä¸»ç•Œé¢

5. **æª¢æŸ¥æ­·å²**

   - å‘ä¸‹æ»¾å‹•æŸ¥çœ‹æ­·å²ç´€éŒ„
   - æ¯æ¢ç´€éŒ„é¡¯ç¤ºåœ–åƒã€è¨ºæ–·çµæœã€ä¿¡å¿ƒåˆ†æ•¸
   - è‡ªå‹•æŒ‰æ™‚é–“å€’åºæ’åˆ—

6. **å¸³è™Ÿè¨­å®š**
   - é»æ“Šå°èˆªæ¬„ã€Œå¸³è™Ÿè¨­å®šã€æŒ‰éˆ•
   - æŸ¥çœ‹å€‹äººè³‡è¨Šå’Œå¸³è™Ÿå»ºç«‹æ™‚é–“
   - ä¿®æ”¹å¯†ç¢¼
   - æŸ¥çœ‹æª¢æ¸¬çµ±è¨ˆè³‡è¨Š

### å¯†ç¢¼è¦æ±‚

è¨»å†Šæ™‚ï¼Œå¯†ç¢¼å¿…é ˆæ»¿è¶³ä»¥ä¸‹æ¢ä»¶ï¼š

âœ… é•·åº¦è‡³å°‘ **8 å€‹å­—ç¬¦**
âœ… åŒ…å«è‡³å°‘ **1 å€‹å¤§å¯«å­—æ¯** (A-Z)
âœ… åŒ…å«è‡³å°‘ **1 å€‹å°å¯«å­—æ¯** (a-z)
âœ… åŒ…å«è‡³å°‘ **1 å€‹æ•¸å­—** (0-9)

**ç¤ºä¾‹**ï¼š`MyPassword123` âœ“

## ğŸ“¡ API æ–‡æª”

### èªè­‰ç›¸é—œ

#### 1. ä½¿ç”¨è€…è¨»å†Š

```
POST /register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "MyPassword123"
}
```

**å›æ‡‰** (200):

```json
{
  "status": "è¨»å†ŠæˆåŠŸï¼"
}
```

**éŒ¯èª¤** (400):

```json
{
  "error": "è©² Email å·²è¢«è¨»å†Š"
}
```

---

#### 2. ä½¿ç”¨è€…ç™»å…¥

```
POST /login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "MyPassword123"
}
```

---

**å›æ‡‰** (200):

```json
{
  "status": "logged_in"
}
```

**éŒ¯èª¤** (401):

```json
{
  "error": "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤"
}
```

---

#### 3. æª¢æŸ¥èªè­‰ç‹€æ…‹

```
GET /check-auth
```

**å›æ‡‰** (200):

```json
{
  "authenticated": true,
  "email": "user@example.com"
}
```

---

#### 4. ä½¿ç”¨è€…ç™»å‡º

```
GET /logout
```

**å›æ‡‰** (200):

```json
{
  "status": "logged_out"
}
```

### å¸³è™Ÿä¸­å¿ƒç›¸é—œ

#### 5. å–å¾—ä½¿ç”¨è€…å€‹äººè³‡æ–™

```
GET /user/profile
Authorization: Session required
```

**å›æ‡‰** (200):

```json
{
  "email": "user@example.com",
  "created_at": "2025-11-28T10:30:45.123456",
  "last_login": "2025-11-28T14:20:30.654321"
}
```

**éŒ¯èª¤** (401):

```json
{
  "error": "è«‹å…ˆç™»å…¥"
}
```

---

#### 6. ä¿®æ”¹å¯†ç¢¼

```
POST /user/change-password
Content-Type: application/json
Authorization: Session required

{
  "old_password": "OldPassword123",
  "new_password": "NewPassword456"
}
```

**å›æ‡‰** (200):

```json
{
  "status": "å¯†ç¢¼å·²æˆåŠŸæ›´æ–°"
}
```

**éŒ¯èª¤** (400):

```json
{
  "error": "èˆŠå¯†ç¢¼ä¸æ­£ç¢º"
}
```

---

#### 7. å–å¾—ä½¿ç”¨è€…çµ±è¨ˆè³‡æ–™

```
GET /user/stats
Authorization: Session required
```

**å›æ‡‰** (200):

```json
{
  "total_detections": 42,
  "disease_stats": {
    "Early_Blight_Severe": 15,
    "Late_Blight_Mild": 10,
    "Healthy": 17
  },
  "severity_stats": {
    "Severe": 18,
    "Mild": 15,
    "None": 9
  }
}
```

### åŠŸèƒ½ç›¸é—œ

#### 8. åœ–åƒé æ¸¬

```
POST /predict
Content-Type: application/json
Authorization: Session required

{
  "image": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."
}
```

**å›æ‡‰** (200):

```json
{
  "disease": "Early_Blight_Severe",
  "severity": "Severe",
  "confidence": 0.95,
  "image_path": "/static/uploads/uuid.jpg"
}
```

**éŒ¯èª¤** (401):

```json
{
  "error": "è«‹å…ˆç™»å…¥"
}
```

---

#### 9. å–å¾—æª¢æ¸¬æ­·å²

```
GET /history
Authorization: Session required
```

**å›æ‡‰** (200):

```json
[
  {
    "email": "user@example.com",
    "disease": "Early_Blight_Severe",
    "severity": "Severe",
    "confidence": 0.95,
    "image_path": "/static/uploads/uuid.jpg",
    "timestamp": "1234567890"
  }
]
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
Leaf_Disease_AI/
â”œâ”€â”€ app.py                      # Flask æ‡‰ç”¨ä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ UserManager             # ä½¿ç”¨è€…ç®¡ç†é¡
â”‚   â”œâ”€â”€ è·¯ç”±å®šç¾© (API endpoints)
â”‚   â””â”€â”€ æ¨¡å‹æ¨ç†é‚è¼¯
â”‚
â”œâ”€â”€ requirements.txt            # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ README.md                   # æœ¬æª”æ¡ˆ
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥è¦å‰‡
â”œâ”€â”€ .env.example                # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html              # ä¸» HTML æ¨¡æ¿
â”‚       â”œâ”€â”€ èªè­‰é é¢ (Login/Register)
â”‚       â”œâ”€â”€ æ‡‰ç”¨é é¢ (Main App)
â”‚       â””â”€â”€ çµæœæ¨¡æ…‹æ¡† (Result Modal)
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ script.js               # å‰ç«¯ JavaScript é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ è¡¨å–®è™•ç†
â”‚   â”‚   â”œâ”€â”€ API å‘¼å«
â”‚   â”‚   â””â”€â”€ UI æ›´æ–°
â”‚   â””â”€â”€ uploads/                # ä¸Šå‚³åœ–åƒå­˜å„²ç›®éŒ„
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ users.json              # ä½¿ç”¨è€…è³‡æ–™ï¼ˆJSONï¼‰
â”‚   â””â”€â”€ records.json            # æª¢æ¸¬ç´€éŒ„ï¼ˆJSONï¼‰
â”‚
â””â”€â”€ yolov11/
    â””â”€â”€ best.pt                 # YOLOv11 é è¨“ç·´æ¨¡å‹
```

## ğŸ”’ å®‰å…¨æ€§æ³¨æ„äº‹é …

### é–‹ç™¼ç’°å¢ƒ

- âœ… é©åˆæœ¬åœ°æ¸¬è©¦å’Œæ¼”ç¤º
- âœ… ç°¡æ˜“ JSON å­˜å„²
- âš ï¸ Secret key å·²ç¡¬ç·¨ç¢¼

### ç”Ÿç”¢ç’°å¢ƒå»ºè­°

1. **è³‡æ–™åº«é·ç§»**

   ```bash
   # ä½¿ç”¨ PostgreSQL + SQLAlchemy
   pip install Flask-SQLAlchemy psycopg2-binary
   ```

2. **ç’°å¢ƒè®Šæ•¸ç®¡ç†**

   ```bash
   pip install python-dotenv
   ```

3. **åŠ å¼·å®‰å…¨**
   - å•Ÿç”¨ HTTPS
   - è¨­ç½®å¼· Secret Key
   - é…ç½® CORS æ”¿ç­–
   - å¯¦æ–½é€Ÿç‡é™åˆ¶

## ğŸ“¦ ç”Ÿç”¢éƒ¨ç½²

### ä½¿ç”¨ Gunicorn

```bash
# å®‰è£ Gunicorn
pip install gunicorn

# é‹è¡Œï¼ˆ4 å€‹ worker é€²ç¨‹ï¼‰
gunicorn -w 4 -b 0.0.0.0:5000 --timeout 120 app:app
```

### ä½¿ç”¨ Docker

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "app:app"]
```

### Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## â“ å¸¸è¦‹å•é¡Œ

### Q: æ¨¡å‹æª”æ¡ˆ `best.pt` åœ¨å“ªè£¡ä¸‹è¼‰ï¼Ÿ

A: æ¨¡å‹æª”æ¡ˆæ˜¯ç¶“éè¨“ç·´çš„ YOLOv11 æ¨¡å‹ã€‚è«‹ç¢ºä¿ `yolov11/best.pt` å­˜åœ¨æ–¼å°ˆæ¡ˆç›®éŒ„ä¸­ã€‚å¦‚æœæ²’æœ‰ï¼Œéœ€è¦ä½¿ç”¨æ‚¨çš„è¨“ç·´è³‡æ–™é›†é€²è¡Œè¨“ç·´ã€‚

### Q: å¯†ç¢¼éŒ¯èª¤æç¤ºä¸å¤ è©³ç´°ï¼Ÿ

A: ç³»çµ±æœƒæç¤ºå…·é«”çš„å¯†ç¢¼è¦æ±‚ï¼ˆé•·åº¦ã€å¤§å°å¯«ã€æ•¸å­—ï¼‰ã€‚è«‹æŒ‰ç…§æç¤ºè¨­ç½®å¯†ç¢¼ã€‚

### Q: ä¸Šå‚³çš„åœ–åƒå­˜å„²åœ¨å“ªè£¡ï¼Ÿ

A: åœ–åƒå­˜å„²åœ¨ `static/uploads/` ç›®éŒ„ï¼Œä½¿ç”¨ UUID å‘½åä»¥é¿å…è¡çªã€‚

### Q: å¦‚ä½•åˆªé™¤æª¢æ¸¬è¨˜éŒ„ï¼Ÿ

A: ç•¶å‰ç‰ˆæœ¬ä¸æ”¯æ´åˆªé™¤åŠŸèƒ½ã€‚å¯ä»¥æ‰‹å‹•ç·¨è¼¯ `data/records.json` æˆ–ç­‰å¾…å¾ŒçºŒç‰ˆæœ¬æ›´æ–°ã€‚

### Q: æ”¯æ´å“ªäº›åœ–åƒæ ¼å¼ï¼Ÿ

A: æ”¯æ´æ‰€æœ‰å¸¸è¦‹çš„åœ–åƒæ ¼å¼ï¼ˆJPGã€PNGã€GIF ç­‰ï¼‰ã€‚

### Q: æª¢æ¸¬é€Ÿåº¦å¦‚ä½•ï¼Ÿ

A: å–æ±ºæ–¼ç¡¬é«”é…ç½®ï¼Œé€šå¸¸ GPU ç’°å¢ƒä¸‹ 1-2 ç§’å…§å®Œæˆä¸€æ¬¡æª¢æ¸¬ã€‚

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

```bash
# å»ºç«‹æ–°åˆ†æ”¯
git checkout -b feature/your-feature

# æäº¤æ›´æ”¹
git commit -am 'Add new feature'

# æ¨é€åˆ°é ç¨‹
git push origin feature/your-feature
```

## ğŸ“„ è¨±å¯è­‰

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT è¨±å¯è­‰ã€‚è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## ğŸ“§ è¯çµ¡æ–¹å¼

- **å ±å‘Šå•é¡Œ**: [GitHub Issues](https://github.com/szweijin/Leaf_Disease_AI/issues)
- **åŠŸèƒ½å»ºè­°**: æäº¤ Pull Request æˆ– Issue

---

**æœ€å¾Œæ›´æ–°**ï¼š2025 å¹´ 11 æœˆ 28 æ—¥
**ç•¶å‰ç‰ˆæœ¬**ï¼š1.0.0
**é–‹ç™¼åˆ†æ”¯**ï¼šfix
